#if($ctx.error)
  $util.error($ctx.error.message, $ctx.error.type)
#end
#if(!$ctx.result)
  ## This could happen if activeMealPlanId points to a non-existent/deleted plan
  $util.error("Active meal plan (ID: $ctx.stash.userDetails.activeMealPlanId) not found.", "NotFound")
#end
## Store the fetched meal plan in the stash
$ctx.stash.activePlan = $ctx.result
$util.toJson($ctx.result)